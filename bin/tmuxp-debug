
#!/bin/sh

selected=$(find $PERSONAL_PROJECTS $WORK_PROJECTS -mindepth 1 -maxdepth 1 -type d | fzf)
if test -z "$selected" ; then
    exit 1
fi

selected_name=$(basename "$selected")

if test -f "$selected/$TMUX_TEMPLATE"; then
    PROJECT_NAME="$selected_name" \
    WORKSPACE="$selected" \
    tmuxp debug-info \
        -f "$TMUX_CONFIG" \
        "$selected/$TMUX_TEMPLATE" \
    | editor -R
else
    echo "tmuxinator session not found"
    exit 1
fi
